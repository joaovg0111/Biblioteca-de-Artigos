{% extends "base.html" %}

{% block title %}Resultados da Busca por "{{ query }}"{% endblock %}

{% block content %}
<div class="container mx-auto">
    <h1 class="text-3xl font-bold mb-2">Resultados da Busca</h1>
    <p class="text-lg text-gray-600 mb-6">Você buscou por: <strong class="text-gray-800">"{{ query }}"</strong></p>

    {% if results %}
        <div class="space-y-6">
            {% for article in results %}
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h2 class="text-xl font-semibold text-blue-700 hover:underline">
                        {# Futuramente, este link levará para a página de detalhes do artigo #}
                        <a href="#">{{ article.title }}</a>
                    </h2>
                    <p class="text-sm text-gray-600 mt-1">
                        <strong>Autores:</strong> {{ article.authors }}
                    </p>
                    <p class="mt-3 text-gray-700">
                        {{ article.abstract|truncatewords:40 }}
                    </p>
                    <div class="mt-4">
                        {% if article.pdf_file %}
                            <a href="{% url 'articles:download-pdf' article.id %}" class="inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 transition duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                                Baixar PDF
                            </a>
                        {% else %}
                            <span class="inline-flex items-center bg-gray-300 text-gray-600 px-4 py-2 rounded-md text-sm font-medium cursor-not-allowed">
                                PDF não disponível
                            </span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-gray-500 mt-12">Nenhum artigo encontrado para a sua busca.</p>
    {% endif %}
</div>
{% endblock %}